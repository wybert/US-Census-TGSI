================================================================================
                    Sentimentæ–‡ä»¶é‡è®¡ç®— - å¿«é€Ÿå‚è€ƒå¡ç‰‡
================================================================================

ğŸ“Š å½“å‰çŠ¶æ€
-----------
æ€»æ–‡ä»¶: 98,584
å·²æœ‰: 93,574 (94.92%)
ç¼ºå¤±: 5,010 (5.08%)

ç¼ºå¤±åˆ†å¸ƒ:
  2014: 3,986 æ–‡ä»¶ (æœ€å¤šï¼)
  2017: 513 æ–‡ä»¶
  2023: 510 æ–‡ä»¶
  2020: 1 æ–‡ä»¶


ğŸš€ å¿«é€Ÿå¼€å§‹ (3ç§æ–¹æ³•)
---------------------

æ–¹æ³•1: æµ‹è¯•è¿è¡Œ (æ¨èé¦–æ¬¡ä½¿ç”¨)
-------------------------------
bash 0.1.9-test-sentiment-pipeline.sh

è¿™ä¼šç”¨2020å¹´çš„1ä¸ªæ–‡ä»¶æµ‹è¯•æ•´ä¸ªæµç¨‹ï¼Œæ— é£é™©ã€‚


æ–¹æ³•2: æ‰¹é‡å¤„ç†æ‰€æœ‰å¹´ä»½ (æœ€å¿«)
-------------------------------
bash 0.1.7-submit-recompute-sentiment-jobs.sh

å¹¶è¡Œæäº¤4ä¸ªGPUä»»åŠ¡ï¼Œé¢„è®¡8-10å°æ—¶å®Œæˆæ‰€æœ‰å¹´ä»½ã€‚


æ–¹æ³•3: æ‰‹åŠ¨å•ç‹¬å¤„ç†
--------------------
# å¤„ç†å•ä¸ªå¹´ä»½ï¼ˆä¾‹å¦‚2014ï¼‰
sbatch 0.1.6-recompute-sentiment-slurm.sh 2014

# æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
squeue -u $USER

# æŸ¥çœ‹æ—¥å¿—
tail -f outputs/logs/recompute_sentiment_*.out


ğŸ“‹ å®Œæ•´æµç¨‹ (5æ­¥)
-----------------

æ­¥éª¤1: æ£€æµ‹ç¼ºå¤±æ–‡ä»¶
-------------------
python 0.1.5-find-missing-sentiment-files.py

è¾“å‡º: outputs/missing_sentiment_files.csv


æ­¥éª¤2: æäº¤è®¡ç®—ä»»åŠ¡
-------------------
bash 0.1.7-submit-recompute-sentiment-jobs.sh

æˆ–å•ç‹¬æäº¤:
sbatch 0.1.6-recompute-sentiment-slurm.sh 2014


æ­¥éª¤3: ç›‘æ§è¿›åº¦
---------------
squeue -u $USER                                    # æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
tail -f outputs/logs/recompute_sentiment_*.out     # æŸ¥çœ‹æ—¥å¿—
nvidia-smi                                         # æŸ¥çœ‹GPUä½¿ç”¨


æ­¥éª¤4: éªŒè¯ç»“æœ
---------------
python 0.1.8-verify-and-copy-sentiment.py --dry_run

æ£€æŸ¥è¾“å‡ºæ˜¯å¦æœ‰æ•ˆã€‚


æ­¥éª¤5: å¤åˆ¶åˆ°æ­£å¼ç›®å½•
---------------------
python 0.1.8-verify-and-copy-sentiment.py --copy

æœ€åç¡®è®¤:
python 0.1.5-find-missing-sentiment-files.py


âš¡ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥
---------------

æ£€æŸ¥ä»»åŠ¡çŠ¶æ€:
  squeue -u $USER

å–æ¶ˆä»»åŠ¡:
  scancel <job_id>
  scancel {job_id1} {job_id2} ...

æŸ¥çœ‹GPU:
  nvidia-smi

æ£€æŸ¥ç£ç›˜ç©ºé—´:
  df -h /n/netscratch/cga/Lab/xiaokang/

æŸ¥çœ‹æ—¥å¿—:
  ls -lht outputs/logs/recompute_sentiment_*.out | head
  tail -f outputs/logs/recompute_sentiment_<job_id>.out


ğŸ“‚ é‡è¦æ–‡ä»¶ä½ç½®
---------------

é…ç½®æ–‡ä»¶:
  setting.json

ç¼ºå¤±æ–‡ä»¶åˆ—è¡¨:
  outputs/missing_sentiment_files.csv

ä¸´æ—¶è®¡ç®—ç›®å½•:
  /n/netscratch/cga/Lab/xiaokang/US-Census-TGSI-workspace/sentiment_computing_path/

æ­£å¼sentimentç›®å½•:
  /n/holylabs/LABS/cga/Lab/data/geo-tweets/cga-sbg-sentiment/

æ—¥å¿—ç›®å½•:
  outputs/logs/


â±ï¸  é¢„ä¼°æ—¶é—´
-------------

å¹´ä»½     æ–‡ä»¶æ•°    é¢„ä¼°æ—¶é—´
2014     3,986     8-10å°æ—¶
2017     513       1-2å°æ—¶
2023     510       1-2å°æ—¶
2020     1         1åˆ†é’Ÿ

å¹¶è¡Œæ€»è®¡: 8-10å°æ—¶


ğŸ’¾ ç£ç›˜ç©ºé—´éœ€æ±‚
---------------

ä¸´æ—¶ç›®å½•: 50-100 GB
æœ€ç»ˆç›®å½•: 50-100 GB
æ€»è®¡: 100-200 GB


âš ï¸  é‡è¦æé†’
------------

1. é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆæµ‹è¯•:
   bash 0.1.9-test-sentiment-pipeline.sh

2. ç¡®ä¿condaç¯å¢ƒå·²æ¿€æ´»:
   conda activate geo

3. æ£€æŸ¥GPUé…é¢æ˜¯å¦å……è¶³

4. éªŒè¯åå†å¤åˆ¶:
   å…ˆ --dry_runï¼Œå† --copy

5. å®šæœŸæŸ¥çœ‹æ—¥å¿—ç›‘æ§è¿›åº¦


ğŸ› æ•…éšœæ’æŸ¥
-----------

ä»»åŠ¡å¤±è´¥?
  â†’ æŸ¥çœ‹æ—¥å¿—: tail outputs/logs/recompute_sentiment_*.err
  â†’ æ£€æŸ¥GPU: nvidia-smi
  â†’ é‡æ–°æäº¤ç›¸åŒä»»åŠ¡ï¼ˆä¼šè·³è¿‡å·²å®Œæˆï¼‰

éªŒè¯å¤±è´¥?
  â†’ æ£€æŸ¥æ–‡ä»¶æ ¼å¼
  â†’ æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
  â†’ å•ç‹¬å¤„ç†é—®é¢˜æ–‡ä»¶

ç£ç›˜ç©ºé—´ä¸è¶³?
  â†’ æ¸…ç†ä¸´æ—¶æ–‡ä»¶
  â†’ åˆ†æ‰¹å¤„ç†å¹´ä»½


ğŸ“ è·å–å¸®åŠ©
-----------

è¯¦ç»†æ–‡æ¡£:
  README-recompute-sentiment.md

å®Œæ•´æ€»ç»“:
  SUMMARY-sentiment-recomputation.md

æµç¨‹å›¾:
  data-pipeline-flowchart.txt


âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•
---------------

è¿è¡Œå‰:
â–¡ å·²è¿è¡Œ 0.1.5 æ£€æµ‹ç¼ºå¤±æ–‡ä»¶
â–¡ conda geo ç¯å¢ƒå¯ç”¨
â–¡ ç£ç›˜ç©ºé—´å……è¶³ (100-200GB)
â–¡ å·²æŸ¥çœ‹ç¼ºå¤±æ–‡ä»¶ç»Ÿè®¡
â–¡ (å¯é€‰) å·²ç”¨2020å¹´æµ‹è¯•

è¿è¡Œä¸­:
â–¡ ä»»åŠ¡å·²æäº¤
â–¡ å®šæœŸæ£€æŸ¥ä»»åŠ¡çŠ¶æ€
â–¡ ç›‘æ§æ—¥å¿—è¾“å‡º
â–¡ GPUæ­£å¸¸è¿è¡Œ

å®Œæˆå:
â–¡ æ‰€æœ‰ä»»åŠ¡æˆåŠŸå®Œæˆ
â–¡ éªŒè¯è„šæœ¬é€šè¿‡
â–¡ æ–‡ä»¶å·²å¤åˆ¶åˆ°æ­£å¼ç›®å½•
â–¡ é‡æ–°æ£€æµ‹ç¡®è®¤ç¼ºå¤±æ–‡ä»¶ä¸º0
â–¡ (å¯é€‰) åˆ é™¤ä¸´æ—¶ç›®å½•


================================================================================
                              å¼€å§‹ä½¿ç”¨!
================================================================================

æ–°æ‰‹? ä»è¿™é‡Œå¼€å§‹:
  bash 0.1.9-test-sentiment-pipeline.sh

æœ‰ç»éªŒ? æ‰¹é‡å¤„ç†:
  bash 0.1.7-submit-recompute-sentiment-jobs.sh

éœ€è¦å¸®åŠ©? æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£:
  cat README-recompute-sentiment.md

================================================================================
